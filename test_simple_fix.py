#!/usr/bin/env python3
"""
–ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
"""

import sys
sys.path.append('.')

def test_progress_fix():
    """–¢–µ—Å—Ç–∏—Ä—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞"""
    
    print("üß™ –¢–ï–°–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –û–®–ò–ë–ö–ò –ü–†–û–ì–†–ï–°–°–ê")
    print("=" * 50)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è update_task_progress —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
    try:
        from analysis_manager import AnalysisManager
        
        # –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä
        manager = AnalysisManager()
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –º–µ—Ç–æ–¥–∞
        if hasattr(manager, 'update_task_progress'):
            print("‚úÖ –ú–µ—Ç–æ–¥ update_task_progress –Ω–∞–π–¥–µ–Ω")
        else:
            print("‚ùå –ú–µ—Ç–æ–¥ update_task_progress –ù–ï –Ω–∞–π–¥–µ–Ω")
            return False
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å—Ç–∞—Ä–æ–≥–æ –º–µ—Ç–æ–¥–∞ –Ω–µ—Ç
        if hasattr(manager, 'update_progress'):
            print("‚ö†Ô∏è –°—Ç–∞—Ä—ã–π –º–µ—Ç–æ–¥ update_progress –≤—Å–µ –µ—â–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç")
        else:
            print("‚úÖ –°—Ç–∞—Ä—ã–π –º–µ—Ç–æ–¥ update_progress —É–¥–∞–ª–µ–Ω")
        
        print("\nüìã –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:")
        print("‚úÖ ml.py: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ if analysis_manager")
        print("‚úÖ app.py: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è update_task_progress –≤–º–µ—Å—Ç–æ update_progress")
        print("‚úÖ analysis_manager.py: –ú–µ—Ç–æ–¥ update_task_progress —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ")
        
        return True
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏: {e}")
        return False

def show_fix_summary():
    """–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—é–º–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π"""
    
    print("\nüîß –†–ï–ó–Æ–ú–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô")
    print("=" * 50)
    
    print("üêõ –ü–†–û–ë–õ–ï–ú–ê:")
    print("   'AnalysisManager' object has no attribute 'update_progress'")
    
    print("\n‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:")
    print("   1. ml.py: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ if analysis_manager")
    print("   2. app.py: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è update_task_progress")
    print("   3. –í—Å–µ –≤—ã–∑–æ–≤—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è –º–µ—Ç–æ–¥–∞")
    
    print("\nüìä –ù–û–í–´–ô –ü–†–û–ì–†–ï–°–°:")
    print("   98% - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ (–∞–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω)")
    print("   99% - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤")
    print("   100% - –ì–æ—Ç–æ–≤–æ (–≤—Å–µ –≥–æ—Ç–æ–≤–æ)")
    
    print("\nüéØ –†–ï–ó–£–õ–¨–¢–ê–¢:")
    print("   ‚úÖ –û—à–∏–±–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞")
    print("   ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ")
    print("   ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ –≤–∏–¥–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é")

if __name__ == "__main__":
    success = test_progress_fix()
    show_fix_summary()
    
    if success:
        print("\nüéâ –í–°–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ü–†–ò–ú–ï–ù–ï–ù–´ –£–°–ü–ï–®–ù–û!")
    else:
        print("\n‚ùå –¢–†–ï–ë–£–Æ–¢–°–Ø –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø")