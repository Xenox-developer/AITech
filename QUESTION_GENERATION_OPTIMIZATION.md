# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤

## –ü—Ä–æ–±–ª–µ–º–∞
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –∑–∞–Ω–∏–º–∞–ª–∞ **10+ –º–∏–Ω—É—Ç** –∏–∑-–∑–∞:

1. **–°–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω—ã–π –ø—Ä–æ–º–ø—Ç** - –∑–∞–ø—Ä–æ—Å 25 –≤–æ–ø—Ä–æ—Å–æ–≤ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏
2. **–ë–æ–ª—å—à–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç** - –¥–æ 5000 —Å–∏–º–≤–æ–ª–æ–≤ —Ç–µ–∫—Å—Ç–∞ + –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
3. **–ü—Ä–æ–±–ª–µ–º—ã —Å JSON** - –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON –æ—Ç OpenAI —Ç—Ä–µ–±–æ–≤–∞–ª –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
4. **Retry –∑–∞–ø—Ä–æ—Å—ã** - —Ç–∞–π–º–∞—É—Ç—ã –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏
5. **–í—ã—Å–æ–∫–∏–µ —Ç–æ–∫–µ–Ω—ã** - max_tokens=4000 –∑–∞–º–µ–¥–ª—è–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é

## –†–µ—à–µ–Ω–∏–µ

### 1. –£–ø—Ä–æ—â–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞
**–ë—ã–ª–æ:**
- 25 –≤–æ–ø—Ä–æ—Å–æ–≤ –∑–∞ —Ä–∞–∑
- –°–ª–æ–∂–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∞–Ω–∞–ª–∏–∑—É –º–∞—Ç–µ—Ä–∏–∞–ª–∞
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

**–°—Ç–∞–ª–æ:**
- 10 –≤–æ–ø—Ä–æ—Å–æ–≤ –∑–∞ —Ä–∞–∑ (–≤ 2.5 —Ä–∞–∑–∞ –º–µ–Ω—å—à–µ)
- –ü—Ä–æ—Å—Ç—ã–µ, —á–µ—Ç–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –ö—Ä–∞—Ç–∫–∏–π —Ñ–æ—Ä–º–∞—Ç JSON

### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
**–ë—ã–ª–æ:**
```python
text_sample = full_text[:5000]  # –î–æ 5000 —Å–∏–º–≤–æ–ª–æ–≤
# + –¥–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
# + —Å–ª–æ–∂–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ–º
```

**–°—Ç–∞–ª–æ:**
```python
text_sample = full_text[:2000]  # –î–æ 2000 —Å–∏–º–≤–æ–ª–æ–≤
# + —Ç–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
# + –º–∞–∫—Å–∏–º—É–º 5 —Ç–µ–º
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ API
**–ë—ã–ª–æ:**
```python
temperature=0.3
max_tokens=4000
# –ë–µ–∑ —Ç–∞–π–º–∞—É—Ç–∞
```

**–°—Ç–∞–ª–æ:**
```python
temperature=0.1      # –ë–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
max_tokens=2000      # –í 2 —Ä–∞–∑–∞ –º–µ–Ω—å—à–µ —Ç–æ–∫–µ–Ω–æ–≤
timeout=30           # –¢–∞–π–º–∞—É—Ç 30 —Å–µ–∫—É–Ω–¥
```

### 4. –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ë–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–π –ø–∞—Ä—Å–∏–Ω–≥ JSON
- –ú–µ–Ω—å—à–µ –ø–æ–ø—ã—Ç–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ë—ã—Å—Ç—Ä—ã–π fallback –Ω–∞ –¥–µ–º–æ-–≤–æ–ø—Ä–æ—Å—ã

## –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –ú–µ—Ç—Ä–∏–∫–∞ | –ë—ã–ª–æ | –°—Ç–∞–ª–æ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|------|-------|-----------|
| –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ | 10+ –º–∏–Ω—É—Ç | <30 —Å–µ–∫—É–Ω–¥ | **20x –±—ã—Å—Ç—Ä–µ–µ** |
| –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤ | 25 | 10 | –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∞ |
| –†–∞–∑–º–µ—Ä –ø—Ä–æ–º–ø—Ç–∞ | ~6000 —Å–∏–º–≤–æ–ª–æ–≤ | ~2500 —Å–∏–º–≤–æ–ª–æ–≤ | 2.4x –º–µ–Ω—å—à–µ |
| –¢–æ–∫–µ–Ω—ã –æ—Ç–≤–µ—Ç–∞ | 4000 | 2000 | 2x –º–µ–Ω—å—à–µ |
| –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å JSON | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–∞—è | –ú–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫ |

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

```bash
cd AITech
python test_optimized_questions.py
```

–¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
- ‚úÖ –í—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (<30 —Å–µ–∫—É–Ω–¥)
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤ (10)
- ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å (3 –∑–∞–ø—É—Å–∫–∞)

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –º–µ–¥–ª–µ–Ω–Ω–æ:

1. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**
   ```python
   # –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã –≤ —Ñ–æ–Ω–µ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∞–ª–∏–∑–∞
   # –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ —Å—Ä–∞–∑—É
   # –í–æ–ø—Ä–æ—Å—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è –ø–æ–∑–∂–µ
   ```

2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
   ```python
   # –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Ö—ç—à—É –∫–æ–Ω—Ç–µ–Ω—Ç–∞
   # –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø–æ—Ö–æ–∂–∏—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
   ```

3. **–ë–∞—Ç—á–µ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**
   ```python
   # –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ 5 –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ 2 –∑–∞–ø—Ä–æ—Å–∞
   # –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API
   ```

4. **–õ–æ–∫–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å**
   ```python
   # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é LLM –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
   # OpenAI —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
   ```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–î–æ–±–∞–≤–ª–µ–Ω—ã –ª–æ–≥–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:
- –í—Ä–µ–º—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –†–∞–∑–º–µ—Ä –ø—Ä–æ–º–ø—Ç–∞ –∏ –æ—Ç–≤–µ—Ç–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ retry –∑–∞–ø—Ä–æ—Å–æ–≤
- –û—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON

## Fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

–ï—Å–ª–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–µ–º–æ-–≤–æ–ø—Ä–æ—Å—ã
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É
3. –ê–Ω–∞–ª–∏–∑ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –¥–æ—Å—Ç—É–ø–µ–Ω –±–µ–∑ –≤–æ–ø—Ä–æ—Å–æ–≤

## –†–µ–∑—É–ª—å—Ç–∞—Ç

–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ —Ç–µ–ø–µ—Ä—å:
- ‚ö° **–ë—ã—Å—Ç—Ä–∞—è** - –º–µ–Ω–µ–µ 30 —Å–µ–∫—É–Ω–¥
- üéØ **–°—Ç–∞–±–∏–ª—å–Ω–∞—è** - –º–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫ JSON
- üí∞ **–≠–∫–æ–Ω–æ–º–∏—á–Ω–∞—è** - –º–µ–Ω—å—à–µ —Ç–æ–∫–µ–Ω–æ–≤ OpenAI
- üîÑ **–ù–∞–¥–µ–∂–Ω–∞—è** - —Å fallback –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏